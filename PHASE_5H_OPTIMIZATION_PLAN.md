# Phase 5H: 最適化・統合計画

**目標**: Phase 5G完了後の最適化・統合により、HLE正答率をさらに向上させる

**現状**: 4.44% → 目標: 5-7%

---

## 🎯 最適化の方向性

### 1. パフォーマンス最適化
- ✅ Beam search高速化（confidence > 0.9で即座に返す）
- [ ] ピースDB索引化（現在は線形探索）
- [ ] 頻出パターンのキャッシング
- [ ] 並列評価（複数問題の並列処理）

### 2. 精度最適化
- ✅ Answer schema優先度引き上げ（30% → 100%）
- [ ] ドメイン検出の改善（問題タイプブーストの調整）
- [ ] ピーススコアリングの最適化
- [ ] Confidence閾値の調整

### 3. カバレッジ拡大
- [ ] 未対応カテゴリの分析
  - Engineering: 7.2%（良好）
  - Computer Science: 5.4%
  - Physics: 3.5%
  - Math: 3.0%（最も低い）
- [ ] カテゴリ別Executor追加
- [ ] 専門用語辞書の構築

### 4. エラー分析と修正
- ✅ Executorパラメータマッピング修正
- [ ] 誤答パターンの分析
- [ ] よくある失敗ケースの対策

---

## 📊 実装計画

### Phase 5H-1: エラー分析（1-2時間）
**目標**: どこで失敗しているかを理解する

1. HLE 2500評価結果の詳細分析
   - カテゴリ別成功/失敗パターン
   - よく使われるピースTop 10
   - 失敗が多いピースTop 10

2. サンプル問題のデバッグ
   - 各カテゴリから5問ずつ選んで詳細分析
   - 失敗原因の分類

3. 改善ポイントの特定

### Phase 5H-2: 精度改善（2-3時間）
**目標**: 既存機能の精度を上げる

1. ドメイン検出の調整
   - 問題タイプブーストの最適化
   - キーワード辞書の拡充

2. ピーススコアリングの改善
   - Confidence重み付けの調整
   - Schema matchボーナスの最適化

3. Answer matchingの強化
   - 数値フォーマットの追加対応
   - 単位変換（cm → m など）

### Phase 5H-3: カバレッジ拡大（2-3時間）
**目標**: 新しい問題タイプに対応

1. 未対応カテゴリの分析
   - Math問題の詳細分類
   - Physics問題の詳細分類

2. 必要なExecutorの特定と実装
   - Physics: 力学、電磁気、波動
   - Math: 群論、位相、解析

3. テストと検証

### Phase 5H-4: 統合テスト（1時間）
**目標**: 全体の動作確認と最終評価

1. 統合テスト実行
2. HLE 2500全評価
3. 目標達成確認（5-7%）
4. レポート作成

---

## 🎯 期待される効果

| カテゴリ | 現状 | 目標 | 施策 |
|---------|------|------|------|
| **Biology/Medicine** | 8.6% | 10-12% | Answer matching改善 |
| **Chemistry** | 7.3% | 8-10% | 単位変換、化学式対応 |
| **Engineering** | 7.2% | 8-10% | 単位変換、計算精度 |
| **Computer Science** | 5.4% | 6-8% | アルゴリズム問題対応 |
| **Math** | 3.0% | 4-6% | 高度な数学Executor |
| **Overall** | 4.44% | **5-7%** | 全体最適化 |

---

## 📈 成功指標

- [ ] **Overall正答率 5%以上**（+0.56ポイント）
- [ ] **Math正答率 4%以上**（+1ポイント）
- [ ] **Biology/Medicine 10%以上**（+1.4ポイント）
- [ ] **評価時間 60秒以内**（パフォーマンス維持）

---

## 🔄 次のステップ

Phase 5H完了後：
1. Phase 6: GSM8K評価（算数文章題）
2. Phase 7: 専門分野強化（Math, Physics）
3. または、現状でのプロダクション化

---

**作成日**: 2026-02-16 23:46 JST  
**推定時間**: 6-9時間  
**優先度**: 高
